# PipeOpPredRegrSurvPEM

Transform
[PredictionRegr](https://mlr3.mlr-org.com/reference/PredictionRegr.html)
to
[PredictionSurv](https://mlr3proba.mlr-org.com/reference/PredictionSurv.md).
The predicted piece-wise constant hazards contained in
[PredictionRegr](https://mlr3.mlr-org.com/reference/PredictionRegr.html)
are transformed into survival probabilities and wrapped in a
[PredictionSurv](https://mlr3.mlr-org.com/reference/PredictionRegr.html)
object.

We compute the survival probability from the predicted hazards using the
following relation: \$\$S(t \| \mathbf{x}) = \exp \left( - \int\_{0}^{t}
\lambda(s \| \mathbf{x}) \\ ds \right) = \exp \left( - \sum\_{j = 1}^{J}
\lambda(j \| \mathbf{x}) d_j\\ \right),\$\$ where \\j = 1, \ldots, J\\
denotes the interval, \\t\\ the time, and \\d_j\\ the duration of
interval \\j\\.

For a more detailed description of PEM, refer to
[pipeline_survtoregr_pem](https://mlr3proba.mlr-org.com/reference/mlr_graphs_survtoregr_pem.md)
or the referred article.

## Dictionary

This [PipeOp](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html)
can be instantiated via the
[dictionary](https://mlr3misc.mlr-org.com/reference/Dictionary.html)
[mlr3pipelines::mlr_pipeops](https://mlr3pipelines.mlr-org.com/reference/mlr_pipeops.html)
or with the associated sugar function
[`mlr3pipelines::po()`](https://mlr3pipelines.mlr-org.com/reference/po.html):

    PipeOpPredRegrSurvPEM$new()
    mlr_pipeops$get("trafopred_regrsurv_pem")
    po("trafopred_regrsurv_pem")

## Input and Output Channels

The input consists of a
[PredictionRegr](https://mlr3.mlr-org.com/reference/PredictionRegr.html)
and a
[data.table](https://rdatatable.gitlab.io/data.table/reference/data.table.html)
containing the transformed data. The
[PredictionRegr](https://mlr3.mlr-org.com/reference/PredictionRegr.html)
is provided by the
[mlr3::LearnerRegr](https://mlr3.mlr-org.com/reference/LearnerRegr.html),
while the
[data.table](https://rdatatable.gitlab.io/data.table/reference/data.table.html)
is generated by
[PipeOpTaskSurvRegrPEM](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survregr_pem.md).
The output is the input
[PredictionRegr](https://mlr3.mlr-org.com/reference/PredictionRegr.html)
transformed to a
[PredictionSurv](https://mlr3proba.mlr-org.com/reference/PredictionSurv.md).
Only works during prediction phase.

## References

Bender, Andreas, Groll, Andreas, Scheipl, Fabian (2018). “A generalized
additive model approach to time-to-event analysis.” *Statistical
Modelling*, **18**(3-4), 299–321.
<https://doi.org/10.1177/1471082X17748083>.

## See also

[pipeline_survtoregr_pem](https://mlr3proba.mlr-org.com/reference/mlr_graphs_survtoregr_pem.md)

Other PipeOps:
[`mlr_pipeops_survavg`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_survavg.md),
[`mlr_pipeops_trafotask_survregr_pem`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survregr_pem.md)

Other Transformation PipeOps:
[`mlr_pipeops_trafopred_classifsurv_IPCW`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafopred_classifsurv_IPCW.md),
[`mlr_pipeops_trafopred_classifsurv_disctime`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafopred_classifsurv_disctime.md),
[`mlr_pipeops_trafotask_survclassif_IPCW`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survclassif_IPCW.md),
[`mlr_pipeops_trafotask_survclassif_disctime`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survclassif_disctime.md),
[`mlr_pipeops_trafotask_survregr_pem`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survregr_pem.md)

## Super class

[`mlr3pipelines::PipeOp`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html)
-\> `PipeOpPredRegrSurvPEM`

## Active bindings

- `predict_type`:

  (`character(1)`)  
  Returns the active predict type of this PipeOp, which is `"crank"`

## Methods

### Public methods

- [`PipeOpPredRegrSurvPEM$new()`](#method-PipeOpPredRegrSurvPEM-new)

- [`PipeOpPredRegrSurvPEM$clone()`](#method-PipeOpPredRegrSurvPEM-clone)

Inherited methods

- [`mlr3pipelines::PipeOp$help()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-help)
- [`mlr3pipelines::PipeOp$predict()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-predict)
- [`mlr3pipelines::PipeOp$print()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-print)
- [`mlr3pipelines::PipeOp$train()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-train)

------------------------------------------------------------------------

### Method `new()`

Creates a new instance of this
[R6](https://r6.r-lib.org/reference/R6Class.html) class.

#### Usage

    PipeOpPredRegrSurvPEM$new(id = "trafopred_regrsurv_pem")

#### Arguments

- `id`:

  (character(1))  
  Identifier of the resulting object.

------------------------------------------------------------------------

### Method `clone()`

The objects of this class are cloneable with this method.

#### Usage

    PipeOpPredRegrSurvPEM$clone(deep = FALSE)

#### Arguments

- `deep`:

  Whether to make a deep clone.
