<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Negative Log-Likelihood Survival Measure — mlr_measures_surv.logloss • mlr3proba</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Negative Log-Likelihood Survival Measure — mlr_measures_surv.logloss"><meta name="description" content="Calculates the cross-entropy, or negative log-likelihood (NLL) or logarithmic (log), loss."><meta property="og:description" content="Calculates the cross-entropy, or negative log-likelihood (NLL) or logarithmic (log), loss."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3proba</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="external-link dropdown-item" href="https://survival-org.github.io/user2024-survival-mlr3/">userR! 2024 Tutorial</a></li>
    <li><a class="external-link dropdown-item" href="https://mlr3book.mlr-org.com/chapters/chapter13/beyond_regression_and_classification.html#sec-survival">Survival Analysis (mlr3 book)</a></li>
    <li><a class="external-link dropdown-item" href="https://mlr3book.mlr-org.com/chapters/chapter13/beyond_regression_and_classification.html#sec-density">Density Estimation (mlr3 book)</a></li>
    <li><a class="external-link dropdown-item" href="https://mlr-org.com/gallery/technical/2023-10-25-bart-survival/">Survival Modeling using BART</a></li>
    <li><a class="external-link dropdown-item" href="https://towardsdatascience.com/neural-networks-for-survival-analysis-in-r-1e0421584ab">Neural Networks for Survival Analysis</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-book"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3proba/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="mlr3 website"><span class="fa fa-link"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Negative Log-Likelihood Survival Measure</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3proba/blob/main/R/MeasureSurvLogloss.R" class="external-link"><code>R/MeasureSurvLogloss.R</code></a></small>
      <div class="d-none name"><code>mlr_measures_surv.logloss.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates the cross-entropy, or negative log-likelihood (NLL) or logarithmic (log), loss.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The Log Loss, in the context of probabilistic predictions, is defined as the
negative log probability density function, \(f\), evaluated at the
observation time (event or censoring), \(t\),
$$L_{NLL}(f, t) = -\log[f(t)]$$</p>
<p>The standard error of the Log Loss, L, is approximated via,
$$se(L) = sd(L)/\sqrt{N}$$
where \(N\) are the number of observations in the test set, and \(sd\) is the standard
deviation.</p>
<p>The <strong>Re-weighted Negative Log-Likelihood</strong> (RNLL) or IPCW (Inverse Probability Censoring Weighted) Log Loss is defined by
$$L_{RNLL}(f, t, \delta) = - \frac{\delta \log[f(t)]}{G(t)}$$
where \(\delta\) is the censoring indicator and \(G(t)\) is the Kaplan-Meier estimator of the
censoring distribution.
So only observations that have experienced the event are taking into account
for RNLL (i.e. \(\delta = 1\)) and both \(f(t), G(t)\) are calculated only at the event times.
If only censored observations exist in the test set, <code>NaN</code> is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="dictionary">Dictionary<a class="anchor" aria-label="anchor" href="#dictionary"></a></h2>


<p>This <a href="https://mlr3.mlr-org.com/reference/Measure.html" class="external-link">Measure</a> can be instantiated via the <a href="https://mlr3misc.mlr-org.com/reference/Dictionary.html" class="external-link">dictionary</a>
<a href="https://mlr3.mlr-org.com/reference/mlr_measures.html" class="external-link">mlr_measures</a> or with the associated sugar function <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">msr()</a>:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>MeasureSurvLogloss<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>mlr_measures<span class="sc">$</span><span class="fu">get</span>(<span class="st">"surv.logloss"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">msr</span>(<span class="st">"surv.logloss"</span>)</span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a></h2>

<table class="table table"><tr><td>Id</td><td>Type</td><td>Default</td><td>Levels</td><td>Range</td></tr><tr><td>eps</td><td>numeric</td><td>1e-15</td><td></td><td>\([0, 1]\)</td></tr><tr><td>se</td><td>logical</td><td>FALSE</td><td>TRUE, FALSE</td><td>-</td></tr><tr><td>IPCW</td><td>logical</td><td>TRUE</td><td>TRUE, FALSE</td><td>-</td></tr><tr><td>ERV</td><td>logical</td><td>FALSE</td><td>TRUE, FALSE</td><td>-</td></tr></table></div>
    <div class="section level2">
    <h2 id="meta-information">Meta Information<a class="anchor" aria-label="anchor" href="#meta-information"></a></h2>


<ul><li><p>Type: <code>"surv"</code></p></li>
<li><p>Range: \([0, \infty)\)</p></li>
<li><p>Minimize: <code>TRUE</code></p></li>
<li><p>Required prediction: <code>distr</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="parameter-details">Parameter details<a class="anchor" aria-label="anchor" href="#parameter-details"></a></h2>


<ul><li><p><code>eps</code> (<code>numeric(1)</code>)<br>
Very small number to substitute zero values in order to prevent errors
in e.g. log(0) and/or division-by-zero calculations.
Default value is 1e-15.</p></li>
</ul><ul><li><p><code>se</code> (<code>logical(1)</code>)<br>
If <code>TRUE</code> then returns standard error of the measure otherwise
returns the mean across all individual scores, e.g. the mean of
the per observation scores.
Default is <code>FALSE</code> (returns the mean).</p></li>
</ul><ul><li><p><code>ERV</code> (<code>logical(1)</code>)<br>
If <code>TRUE</code> then the Explained Residual Variation method is applied, which
means the score is standardized against a Kaplan-Meier baseline.
Default is <code>FALSE</code>.</p></li>
</ul><ul><li><p><code>IPCW</code> (<code>logical(1)</code>)<br>
If <code>TRUE</code> (default) then returns the \(L_{RNLL}\) score (which is proper), otherwise the \(L_{NLL}\) score (improper). See Sonabend et al. (2024) for more details.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="data-used-for-estimating-censoring-distribution">Data used for Estimating Censoring Distribution<a class="anchor" aria-label="anchor" href="#data-used-for-estimating-censoring-distribution"></a></h2>



<p>If <code>task</code> and <code>train_set</code> are passed to <code>$score</code> then \(G(t)\) is fit using
<strong>all observations</strong> from the train set, otherwise the test set is used.
Using the train set is likely to reduce any bias caused by calculating parts of the
measure on the test data it is evaluating.
Also usually it means that more data is used for fitting the censoring
distribution \(G(t)\) via the Kaplan-Meier.
The training data is automatically used in scoring resamplings.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Sonabend, Raphael, Zobolas, John, Kopper, Philipp, Burk, Lukas, Bender, Andreas (2024).
“Examining properness in the external validation of survival models with squared and logarithmic losses.”
<a href="https://arxiv.org/abs/2212.05260v2" class="external-link">https://arxiv.org/abs/2212.05260v2</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other survival measures:
<code><a href="mlr_measures_surv.calib_alpha.html">mlr_measures_surv.calib_alpha</a></code>,
<code><a href="mlr_measures_surv.calib_beta.html">mlr_measures_surv.calib_beta</a></code>,
<code><a href="mlr_measures_surv.calib_index.html">mlr_measures_surv.calib_index</a></code>,
<code><a href="mlr_measures_surv.chambless_auc.html">mlr_measures_surv.chambless_auc</a></code>,
<code><a href="mlr_measures_surv.cindex.html">mlr_measures_surv.cindex</a></code>,
<code><a href="mlr_measures_surv.dcalib.html">mlr_measures_surv.dcalib</a></code>,
<code><a href="mlr_measures_surv.graf.html">mlr_measures_surv.graf</a></code>,
<code><a href="mlr_measures_surv.hung_auc.html">mlr_measures_surv.hung_auc</a></code>,
<code><a href="mlr_measures_surv.intlogloss.html">mlr_measures_surv.intlogloss</a></code>,
<code><a href="mlr_measures_surv.mae.html">mlr_measures_surv.mae</a></code>,
<code><a href="mlr_measures_surv.mse.html">mlr_measures_surv.mse</a></code>,
<code><a href="mlr_measures_surv.nagelk_r2.html">mlr_measures_surv.nagelk_r2</a></code>,
<code><a href="mlr_measures_surv.oquigley_r2.html">mlr_measures_surv.oquigley_r2</a></code>,
<code><a href="mlr_measures_surv.rcll.html">mlr_measures_surv.rcll</a></code>,
<code><a href="mlr_measures_surv.rmse.html">mlr_measures_surv.rmse</a></code>,
<code><a href="mlr_measures_surv.schmid.html">mlr_measures_surv.schmid</a></code>,
<code><a href="mlr_measures_surv.song_auc.html">mlr_measures_surv.song_auc</a></code>,
<code><a href="mlr_measures_surv.song_tnr.html">mlr_measures_surv.song_tnr</a></code>,
<code><a href="mlr_measures_surv.song_tpr.html">mlr_measures_surv.song_tpr</a></code>,
<code><a href="mlr_measures_surv.uno_auc.html">mlr_measures_surv.uno_auc</a></code>,
<code><a href="mlr_measures_surv.uno_tnr.html">mlr_measures_surv.uno_tnr</a></code>,
<code><a href="mlr_measures_surv.uno_tpr.html">mlr_measures_surv.uno_tpr</a></code>,
<code><a href="mlr_measures_surv.xu_r2.html">mlr_measures_surv.xu_r2</a></code></p>
<p>Other Probabilistic survival measures:
<code><a href="mlr_measures_surv.graf.html">mlr_measures_surv.graf</a></code>,
<code><a href="mlr_measures_surv.intlogloss.html">mlr_measures_surv.intlogloss</a></code>,
<code><a href="mlr_measures_surv.rcll.html">mlr_measures_surv.rcll</a></code>,
<code><a href="mlr_measures_surv.schmid.html">mlr_measures_surv.schmid</a></code></p>
<p>Other distr survival measures:
<code><a href="mlr_measures_surv.calib_alpha.html">mlr_measures_surv.calib_alpha</a></code>,
<code><a href="mlr_measures_surv.calib_index.html">mlr_measures_surv.calib_index</a></code>,
<code><a href="mlr_measures_surv.dcalib.html">mlr_measures_surv.dcalib</a></code>,
<code><a href="mlr_measures_surv.graf.html">mlr_measures_surv.graf</a></code>,
<code><a href="mlr_measures_surv.intlogloss.html">mlr_measures_surv.intlogloss</a></code>,
<code><a href="mlr_measures_surv.rcll.html">mlr_measures_surv.rcll</a></code>,
<code><a href="mlr_measures_surv.schmid.html">mlr_measures_surv.schmid</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="super-classes">Super classes<a class="anchor" aria-label="anchor" href="#super-classes"></a></h2>
    <p><code><a href="https://mlr3.mlr-org.com/reference/Measure.html" class="external-link">mlr3::Measure</a></code> -&gt; <code><a href="MeasureSurv.html">mlr3proba::MeasureSurv</a></code> -&gt; <code>MeasureSurvLogloss</code></p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-MeasureSurvLogloss-new"><code>MeasureSurvLogloss$new()</code></a></p></li>
<li><p><a href="#method-MeasureSurvLogloss-clone"><code>MeasureSurvLogloss$clone()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="aggregate"><a href="https://mlr3.mlr-org.com/reference/Measure.html#method-aggregate"><code>mlr3::Measure$aggregate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="format"><a href="https://mlr3.mlr-org.com/reference/Measure.html#method-format"><code>mlr3::Measure$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="help"><a href="https://mlr3.mlr-org.com/reference/Measure.html#method-help"><code>mlr3::Measure$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="print"><a href="https://mlr3.mlr-org.com/reference/Measure.html#method-print"><code>mlr3::Measure$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="score"><a href="https://mlr3.mlr-org.com/reference/Measure.html#method-score"><code>mlr3::Measure$score()</code></a></span></li>
</ul></details></p><hr><a id="method-MeasureSurvLogloss-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Creates a new instance of this <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/mlr_measures_surv.logloss.html">MeasureSurvLogloss</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ERV <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>ERV</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
Standardize measure against a Kaplan-Meier baseline
(Explained Residual Variation)</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-MeasureSurvLogloss-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">MeasureSurvLogloss</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raphael Sonabend, Franz Kiraly, Michel Lang, John Zobolas, Philip Studener.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

