# PipeOpPredClassifSurvIPCW

Transform
[PredictionClassif](https://mlr3.mlr-org.com/reference/PredictionClassif.html)
to
[PredictionSurv](https://mlr3proba.mlr-org.com/reference/PredictionSurv.md)
using the **I**nverse **P**robability of **C**ensoring **W**eights
(IPCW) method by Vock et al. (2016).

## Dictionary

This [PipeOp](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html)
can be instantiated via the
[dictionary](https://mlr3misc.mlr-org.com/reference/Dictionary.html)
[mlr3pipelines::mlr_pipeops](https://mlr3pipelines.mlr-org.com/reference/mlr_pipeops.html)
or with the associated sugar function
[`mlr3pipelines::po()`](https://mlr3pipelines.mlr-org.com/reference/po.html):

    PipeOpPredClassifSurvIPCW$new()
    mlr_pipeops$get("trafopred_classifsurv_IPCW")
    po("trafopred_classifsurv_IPCW")

## Input and Output Channels

The input is a
[PredictionClassif](https://mlr3.mlr-org.com/reference/PredictionClassif.html)
and a [data.table](https://rdrr.io/pkg/data.table/man/data.table.html)
containing observed times, censoring indicators and row ids, all
generated by
[PipeOpTaskSurvClassifIPCW](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survclassif_IPCW.md)
during the prediction phase.

The output is the input
[PredictionClassif](https://mlr3.mlr-org.com/reference/PredictionClassif.html)
transformed to a
[PredictionSurv](https://mlr3proba.mlr-org.com/reference/PredictionSurv.md).
Each input classification probability prediction corresponds to the
probability of having the event up to the specified cutoff time
\\\hat{\pi}(\textbf{X}\_i) = P(T_i \< \tau\|\textbf{X}\_i)\\, see Vock
et al. (2016) and
[PipeOpTaskSurvClassifIPCW](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survclassif_IPCW.md).
Therefore, these predictions serve as **continuous risk scores** that
can be directly interpreted as `crank` predictions in the right-censored
survival setting. We also map them to the survival distribution
prediction `distr`, at the specified cutoff time point \\\tau\\, i.e. as
\\S_i(\tau) = 1 - \hat{\pi}(\textbf{X}\_i)\\. Survival measures that use
the survival distribution (eg
[ISBS](https://mlr3proba.mlr-org.com/reference/mlr_measures_surv.graf.md))
should be evaluated exactly at the cutoff time point \\\tau\\.

## References

Vock, M D, Wolfson, Julian, Bandyopadhyay, Sunayan, Adomavicius,
Gediminas, Johnson, E P, Vazquez-Benitez, Gabriela, O'Connor, J P
(2016). “Adapting machine learning techniques to censored time-to-event
health record data: A general-purpose approach using inverse probability
of censoring weighting.” *Journal of Biomedical Informatics*, **61**,
119–131.
[doi:10.1016/j.jbi.2016.03.009](https://doi.org/10.1016/j.jbi.2016.03.009)
, <https://www.sciencedirect.com/science/article/pii/S1532046416000496>.

## See also

[pipeline_survtoclassif_IPCW](https://mlr3proba.mlr-org.com/reference/mlr_graphs_survtoclassif_IPCW.md)

Other Transformation PipeOps:
[`mlr_pipeops_trafopred_classifsurv_disctime`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafopred_classifsurv_disctime.md),
[`mlr_pipeops_trafopred_regrsurv_pem`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafopred_regrsurv_pem.md),
[`mlr_pipeops_trafotask_survclassif_IPCW`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survclassif_IPCW.md),
[`mlr_pipeops_trafotask_survclassif_disctime`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survclassif_disctime.md),
[`mlr_pipeops_trafotask_survregr_pem`](https://mlr3proba.mlr-org.com/reference/mlr_pipeops_trafotask_survregr_pem.md)

## Super class

[`mlr3pipelines::PipeOp`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html)
-\> `PipeOpPredClassifSurvIPCW`

## Active bindings

- `predict_type`:

  (`character(1)`)  
  Returns the active predict type of this PipeOp, which is `"crank"`

## Methods

### Public methods

- [`PipeOpPredClassifSurvIPCW$new()`](#method-PipeOpPredClassifSurvIPCW-new)

- [`PipeOpPredClassifSurvIPCW$clone()`](#method-PipeOpPredClassifSurvIPCW-clone)

Inherited methods

- [`mlr3pipelines::PipeOp$help()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-help)
- [`mlr3pipelines::PipeOp$predict()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-predict)
- [`mlr3pipelines::PipeOp$print()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-print)
- [`mlr3pipelines::PipeOp$train()`](https://mlr3pipelines.mlr-org.com/reference/PipeOp.html#method-train)

------------------------------------------------------------------------

### Method `new()`

Creates a new instance of this
[R6](https://rdrr.io/pkg/R6/man/R6Class.html) class.

#### Usage

    PipeOpPredClassifSurvIPCW$new(id = "trafopred_classifsurv_IPCW")

#### Arguments

- `id`:

  (character(1))  
  Identifier of the resulting object.

------------------------------------------------------------------------

### Method `clone()`

The objects of this class are cloneable with this method.

#### Usage

    PipeOpPredClassifSurvIPCW$clone(deep = FALSE)

#### Arguments

- `deep`:

  Whether to make a deep clone.
